{"version":3,"file":"redis.js","sourceRoot":"","sources":["redis.ts"],"names":[],"mappings":";;AAAA,mCAAkC;AAClC,iCAAiC;AAEjC,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAS,YAAY,CAAC,CAAC;AACnD,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAS,YAAY,CAAC,CAAC;AAEnD,IAAI,KAAK,GAAG,IAAI,CAAC;AACjB;IACE,IAAI,CAAC,KAAK,EAAE;QACV,KAAK,GAAG,IAAI,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;KAC3C;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AALD,4BAKC;AAED;IACE,OAAO,IAAI,OAAO,EAAE,CAAC;AACvB,CAAC;AAFD,sCAEC","sourcesContent":["import * as ioredis from 'ioredis'\r\nimport * as config from 'config';\r\n\r\nconst redisHost = config.get<string>('redis.host');\r\nconst redisPort = config.get<number>('redis.port');\r\n\r\nlet redis = null;\r\nexport function getRedis(): ioredis.Redis {\r\n  if (!redis) {\r\n    redis = new ioredis(redisPort, redisHost);\r\n  }\r\n  return redis;\r\n}\r\n\r\nexport function getSubscriber(): ioredis.Redis {\r\n  return new ioredis();\r\n}\r\n"]}